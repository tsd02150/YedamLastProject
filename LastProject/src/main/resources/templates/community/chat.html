<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<style>
#chatSection {
	padding-top: 50px;
	padding-bottom: 50px;
}

#titlename {
	font-size: 30px;
}

#titlename span {
	line-height: 46px;
}

#titlename span:after {
	width: 150px;
}

#infoSpace{
	position: relative;
	height:770px;
}
#chatInfo{
	position: relative;
    border-radius: 3px;
    background: #FFF;
    border-top: 3px solid #292931;
    margin-bottom: 20px;
    margin-right:20px;
    width: 200px;
    height:300px;
    box-shadow: 0px 5px 5px #dddddddd;
}
#roomList{
	overflow: auto;
}
#addRoom{
	position : absolute;
	bottom : 0;
	margin:5px;
	background-color:#eee;
	text-align: center;
	width: 190px;
	height:30px;
	border-radius: 3px;
}
#participation{
	position: relative;
    border-radius: 3px;
    background: #FFF;
    border-top: 3px solid #292931;
    margin-bottom: 20px;
    margin-right:20px;
    width: 200px;
    height:300px;
    box-shadow: 0px 5px 5px #dddddddd;
}
#particiCnt{
	position : absolute;
	bottom : 0;
	margin:5px;
	background-color:#eee;
	text-align: center;
	width: 190px;
	height:25px;
	border-radius: 3px;
}
#resetBtn{
	position : absolute;
	bottom : 0;
	width: 200px;
}

/* 모달 창 */
#myform fieldset {
	display: inline-block;
	direction: rtl;
	border: 0;
}

#myform fieldset legend {
	text-align: right;
}

#myform input[type=radio] {
	display: none;
}

#myform label {
	font-size: 3em;
	color: transparent;
	text-shadow: 0 0 0 #f0f0f0;
}

#myform label:hover {
	text-shadow: 0 0 0 rgba(250, 208, 0, 0.99);
}

#myform label:hover ~ label {
	text-shadow: 0 0 0 rgba(250, 208, 0, 0.99);
}

#myform input[type=radio]:checked ~ label {
	text-shadow: 0 0 0 rgba(250, 208, 0, 0.99);
}

#reviewContents {
	width: 100%;
	height: 150px;
	padding: 10px;
	box-sizing: border-box;
	border: solid 1.5px #D3D3D3;
	border-radius: 5px;
	font-size: 16px;
	resize: none;
}

.modal {
	display: none;
	position: fixed;
	z-index: 999;
	left: 0;
	top: 0;
	width: 100%;
	height: 100%;
	overflow: auto;
	background-color: rgba(0, 0, 0, 0.4);
}

.modal-content {
	background-color: #fefefe;
	margin: 10% auto;
	padding: 20px;
	border: 1px solid #888;
	width: 40%;
	height: 800px;
}

.close {
	float: right;
	font-size: 28px;
	font-weight: bold;
	cursor: pointer;
}

.close:hover, .close:focus {
	color: #000;
	text-decoration: none;
	cursor: pointer;
}


</style>
<link rel="stylesheet" href="../community/css/chat.css">
</head>
<body>
	<div layout:fragment="content">
		<div id="chatSection">
			<h1 class="news-title" id="titlename">
				<span>익명 채팅방</span>
			</h1>
			<div class="d-flex justify-content-center">
				<div id="infoSpace">
					<div id="chatInfo">
						<div class="box-header with-border">
							<h3 class="box-title">채팅방 목록</h3>
						</div>
						<div id="roomList" class="box-body">
							<div th:each="room:${roomList}">
								<p>[[${room.nm}]]</p>
							</div>
						</div>
						<div id="addRoom" onClick="addRoom()">
							<h4>채팅방 생성</h4>
						</div>
					</div>
					<div id="participation">
						<div class="box-header with-border">
							<h3 class="box-title">채팅방 참여 인원</h3>
						</div>
						<div class="box-body">
							<div th:each="partici:${particiList}">
								<p>[[${partici.anonNick}]]</p>
							</div>
						</div>
						<div id="particiCnt">
							<h5>참여인원 : [[${roomInfo.conn}]] 명</h5>
						</div>
					</div>
					<button type="button" id="resetBtn" class="btn-dark" onClick="resetChat()">채팅 초기화</button>
				</div>

				<!-- DIRECT CHAT DANGER -->
				<div class="box box-danger direct-chat direct-chat-danger">
					<div class="box-header with-border">
						<h3 id="roomno" class="box-title" th:data-roomno="${roomInfo.roomNo}" th:text="${roomInfo.nm}">전체 채팅방</h3>

						<div class="box-tools pull-right">
							<span data-toggle="tooltip" title="3 New Messages"
								class="badge bg-red" th:text="${roomInfo.conn}">1</span>
							<button type="button" class="btn btn-box-tool">
								<i class="fa fa-comments"></i>
							</button>
						</div>
					</div>
					<!-- /.box-header -->
					<div class="box-body">
						<!-- Conversations are loaded here -->
						<div id="chatSpace" class="direct-chat-messages">
							
						</div>
						<!--/.direct-chat-messages-->

					</div>
					<!-- /.box-body -->
					<div class="box-footer">
						<form action="#" method="post">
							<div class="input-group">
								<input type="text" id="my-message" name="message" placeholder="Type Message ..." class="form-control"> 
								<span class="input-group-btn">
									<button type="button" class="btn btn-danger btn-flat" id="send">Send</button>
								</span>
							</div>
						</form>
					</div>
					<!-- /.box-footer-->
				</div>
				<!--/.direct-chat -->
			</div>
		</div>
		<!-- 모달 창 -->
		<div id="reviewModal" class="modal">
			<div class="modal-content">

				<span class="close">&times;</span>
				<h2 style="text-align: center;">상품 후기</h2>
				<div>&nbsp;</div>
				<div class="pic" th:each="prdt : ${getFarm}">
					<img style="width: 200px; height: 200px;"
						th:src="|/mall/images/main/${prdt.thumb}|">
				</div>
				<div>&nbsp;</div>
				<div>&nbsp;</div>
				<div>&nbsp;</div>
				<div>&nbsp;</div>
				<div>&nbsp;</div>
				<form class="mb-3" name="myform" id="myform" method="post">
					<fieldset>
						<span class="text-bold">별점을 선택해주세요</span> <input type="radio"
							name="reviewStar" value="5" id="rate1"><label for="rate1">★</label>
						<input type="radio" name="reviewStar" value="4" id="rate2"><label
							for="rate2">★</label> <input type="radio" name="reviewStar"
							value="3" id="rate3"><label for="rate3">★</label> <input
							type="radio" name="reviewStar" value="2" id="rate4"><label
							for="rate4">★</label> <input type="radio" name="reviewStar"
							value="1" id="rate5"><label for="rate5">★</label>
					</fieldset>
					<div>

						<textarea class="col-auto form-control" type="text"
							id="reviewContents"
							placeholder="좋은 수강평을 남겨주시면 Cocolo에 큰 힘이 됩니다! 포인트 5000p도 지급!!"></textarea>
					</div>
					<div>
						
					</div>
					<div>&nbsp;</div>
					<div></div>
					<div>&nbsp;</div>
					<div>&nbsp;</div>
					<div style="text-align: center;">
						<button type="reset"
							style="background-color: beige; border: none;">취소하기</button>
						<button type="submit"
							style="background-color: yellowgreen; border: none;">등록하기</button>
					</div>
				</form>
			</div>
		</div>

		<script th:inline="javascript">
			let myAnonNick=[[${particiInfo.anonNick}]];
			let myMembNo=[[${particiInfo.membNo}]];
			function resetChat() {
			    $("#chatSpace").html("");
			}
		</script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.4.0/sockjs.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
		
	</div>
</body>
</html>