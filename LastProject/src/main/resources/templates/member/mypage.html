<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout2}">

<head>
	<meta charset="UTF-8">
	<title></title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
	<style>
	.sidebar.sidebar-left{
		height: 1000px;
	}
	.titleMenu{
		padding-top : 20px;
	}
	.sidebarMenu{
		padding-top : 40px;
		padding-bottom : 40px;
	}
		#mypagetbl, .sidebar , #intrestTbl{
			border: 1px solid #DDDDDD;
			height: auto;
		}
		#mypagetbl, #intrestTbl, #myordertbl{
		width : 700px;
		font-size: larger;
		}
		#mypagetbl th, .intehead, #myordertbl th{
			padding : 20px;
			width : 520px;
		}
		#mypagetbl td, #intrestTbl td, #myordertbl td{
			text-align : right;
			padding-right : 20px;
			width : 200px;
		}
		.titleTxt{
			text-align : center;
		}
		.py-20 {
    clear: both;
    height: 20px;
  }
  .bi{
  	font-size: 50px;
  	margin-top : 15px;
  }
	.int_item{
	width : 130px;
	height : 120px;
	border: 1px solid #dddddd;
	display: inline-block;
	padding : 15px;
	margin : 15px;
	
	}
	.itembox{
	text-align : left;
	padding : 10px;
			width : 611px;
	}
	
	.rate, .tprc{
		font-size: 16px;
	}
	.sidebarMenu a.items-center {
  color: black;
}
	.sidebarMenu a:hover:not(.items-center) {
  color: gray;
}
	</style>
</head>
<body>
	<div layout:fragment="mypage">
	<section class="block-wrapper flex items-center justify-center w-screen h-screen p-10 space-x-6 bg-gray-300"
		layout:fragment="content">
				<!-- 내프로필 -->
					<div id="mypageBody">
						<table id="mypagetbl">
							<tr class="itemhead" style="background-color : bisque">
								<th>내 프로필</th>
								<td><a href="mypageInfo"><p class="bi bi-arrow-right-square-fill"></p></a></td>
							</tr>
							<tr>
								<th>[[${session.loggedInMember.nm}]]</th>
								<td></td>
							</tr>
							<tr>
								<th>[[${session.loggedInMember.tel}]]</th>
								<td><button type="button" class="btn btn-outline-secondary">수정</button></td>
							</tr>
							<tr>
								<th>[[${session.loggedInMember.point}]] point</th>
								<td><a href="#"><button type="button" class="btn btn-outline-secondary">충전</button></a></td>
							</tr>
						</table>
					</div>
					<div class="py-20"></div>
					<!-- interest item -->
					<div id="intrest">
					<table id="intrestTbl">
							<tr style="background-color : bisque">
								<th class="intehead">주식현황</th>
								<td><p class="bi bi-arrow-right-square-fill"></p></td>
							</tr>
							<tr>
								<th colspan="2" class="itembox">
									<div id="thisbox"></div>
								</th>
							</tr>
						</table>
						<div class="py-20"></div>
						<h4 style="padding-left : 25px;">+ 관심종목</h4>
						<div id="thisbox2">
						</div>
					</div>
					<!-- interest item end -->
					<!-- order -->
					<table id="myordertbl">
							<tr class="itemhead" style="background-color : bisque">
								<th>주문 : 배송</th>
								<td><p class="bi bi-arrow-right-square-fill"></p></td>
							</tr>
							<tr>
								<th>[[${session.loggedInMember.nm}]]</th>
								<td></td>
							</tr>
							<tr>
								<th>[[${session.loggedInMember.tel}]]</th>
								<td><button type="button" class="btn btn-outline-secondary">수정</button></td>
							</tr>
							<tr>
								<th>[[${session.loggedInMember.point}]] point</th>
								<td><a href="#"><button type="button" class="btn btn-outline-secondary">충전</button></a></td>
							</tr>
						</table>
					<!-- order end -->
				<!-- 내프로필 end -->
				
				<!-- 관심종목 -->
				<div class="col-lg-7 col-md-12 col-sm-12 col-xs-12">
					
				</div>
				<!-- 관심종목 end -->
		<script>
		let id = "[[${session.loggedInMember.id}]]";
		
		let box = '';
		let box2 = '';
		
			$.ajax({
				url : "stockList",
				method : "POST",
				data : {
					"id" : id
				},
				success : function(data){
					data.forEach(el=>{
						console.log(el);
						box += `<div class="int_item">
											<h4>${el.tnm}</h4>
											<span class="rate">${el.rate}</span><br>
						 					<span class="tprc">(${el.tprc}원)</span>
						 					</div>`;
					})
					 
					$("#thisbox").html(box);
					boxClass();
				},
				error : function(err){
					console.log(err)
				}
			});
			
			$.ajax({
				url : "interestList",
				method : "POST",
				data : {
					"id" : id
				},
				success : function(data){
					data.forEach(el=>{
						console.log(el);
						box2 += `<div class="int_item">
											<h4>${el.tnm}</h4>
											<span class="rate">${el.rate}</span><br>
						 					<span class="tprc">(${el.tprc}원)</span>
						 					</div>`;
					})
					
					$("#thisbox2").html(box2);
					boxClass();
				},
				error : function(err){
					console.log(err)
				}
			});
			
			function boxClass(){
				if(parseInt($(".rate").text()) >= 0){
					$(".rate").addClass("high");
				}else{
					$(".rate").addClass("low");
				}
			}
		</script>
	</section>
		</div>
</body>

</html>