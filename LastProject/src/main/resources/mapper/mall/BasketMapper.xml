<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.yedam.app.mall.mapper.BasketMapper">

	<!-- 전체조회 basketVO + productVO + memberVO -->
	<select id="getBasketList" resultType="BasketVO">
		SELECT *
		FROM (
			SELECT *
			FROM BASKET B JOIN PRODUCT P
				USING(prdt_no)) J JOIN MEMBER M
			ON M.memb_no= J.memb_no
			
		ORDER BY prdt_no DESC
	</select>
	
	<!-- 장바구니 추가 -->
	<insert id="addCartItem" parameterType="BasketVO">
	
		insert into basket ( 
							memb_no
							,prdt_no
							,cntn
							
							)
		values(
				#{membNo}
				,#{prdtNo}
				,#{cnt}
		)
	</insert>
	

	<!-- 전체삭제 -->
	<delete id="deleteAllBasket">
		DELETE FROM BASKET

	</delete>

	<!-- 선택 상품 삭제 -->
	<delete id="deleteBasket" parameterType="String">
		DELETE FROM BASKET
		WHERE prdt_no=#{prdtNo}
	</delete>


</mapper>